include "console.iol"
include "runtime.iol"

type StartRequest: string {
----.location: any
}

type FinishRequest: string

interface MyEmbeddedInterface {
OneWay:
----start( StartRequest )
}

interface EmbedderInterface {
OneWay:
----finish( FinishRequest )
}

outputPort MyEmbeddedService {
Interfaces: MyEmbeddedInterface
}

inputPort Embedder {
Location: "local"
Protocol: sodep
Interfaces: EmbedderInterface
}

embedded {
Jolie:
----"embedded.ol" in MyEmbeddedService
}

main
{
----request = "Message from embedder";
----getLocalLocation@Runtime( )( request.location );
----start@MyEmbeddedService( request );
----finish( response );
----println@Console( response )()
}