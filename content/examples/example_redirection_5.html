include "console.iol"
include "runtime.iol"

interface SubServiceInterface {
RequestResponse:
------calcSub
}

interface SumServiceInterface {
RequestResponse:
------calcSum
}


outputPort SubService {
Location: "socket://localhost:8001/"
Protocol: sodep
Interfaces: SubServiceInterface
}

outputPort SumService {
Location: "socket://localhost:8002/"
Protocol: sodep
Interfaces: SumServiceInterface
}

inputPort MyService {
Location: "socket://localhost:8000/"
Protocol: sodep
OneWay:
------shutdown
Redirects:
------Sub => SubService,
------Sum => SumService
}

main
{	
--registerForInput@Console()();
--while ( 1 ) {
----println@Console("available commands: relocateSum, relocateSub, exit")();
----print@Console(">>")();
----in( command );
----if ( command == "relocateSum" ) {
------print@Console("Insert the new location:")();
------in( location );
------relocate_request.name = "SumService";
------relocate_request.location = location;
------setOutputPort@Runtime( relocate_request )()
----};
----if ( command == "relocateSub" ) {
------print@Console("Insert the new location:")();
------in( location );
------relocate_request.name = "SubService";
------relocate_request.location = location;
------setOutputPort@Runtime( relocate_request )()
----};
----if ( command == "exit" ) {
------exit
----}
--}
}